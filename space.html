<!DOCTYPE HTML>
	<html>
	<head>
	<style>



	</style>
	</head>
	<body>
	<canvas id="canvas" width="500" height="500" > </canvas>

	<script>
	
	 
	
	 var canvas = document.getElementById("canvas");
	 var ctx = canvas.getContext('2d');
	 var size = 20;
	 var statek = [];
	 var p = [];
	 var i=0;
	 var n=0;
	 var enemy = [];
	 var poc;
	 
	ctx.beginPath();
	ctx.fillStyle = "white";
	ctx.fillRect(0,0,500,500);
	
	function ship(x,y,size)
	{

	 this.x = x;
	 this.y = y;
	 this.dy=20;
	 this.dx=20;
	 
	ctx.fillStyle = "gray";
	ctx.fillRect(x,y,size,size);

	}
	
	
	function alien(x,y)
	{
		this.x = x;
		this.y = y;
		
		
		this.pokaz = function()
			{
			  //ctx.fillRect(200,100,200);
			  //ellipse(this.x,this.y,60,60);
			  ctx.fillStyle = "green";
			  ctx.fillRect(this.x,this.y,60,60);			
			}
	
	}
	
	
	
	statek[0] = new ship(240,480,20);
	statek[1] = new ship(220,480,20);
	statek[2] = new ship(260,480,20);
	statek[3] = new ship(240,460,20);
	


	
ship.prototype.lewo = function() 
	{
		this.x -= this.dx;
	
	}
	
ship.prototype.prawo = function() 
	{
	this.x += this.dx;
	
	}
		poc = new pocisk(100,400);
function rysuj()
{
	for(var t = 0 ; t < 6 ; t++)
    {enemy[t] = new alien(t*80+10 , 20);
	enemy[t].pokaz();}


	poc.pokaz();

	poc.clear();

	poc.ruch();

}	
	
function pocisk(x,y)
{
	this.x=x;
	this.y=y;
  
	this.pokaz = function()
	{ 
	  ctx.fillRect(this.x,this.y,20,20);	
	  ctx.fillStyle="gray";
	
	}
	
	this.ruch = function()
	{ 
	  this.y = this.y - 5;
	  ctx.fill();
	}	
	
	this.clear = function()
	{

	// ctx.clearRect(this.x,this.y,20,20);
	// ctx.fillRect(this.x,this.y,20,20);
	}
	
	
}	


	
/*pocisk.prototype.rysuj = function()
{
		ctx.fillStyle="gray";
		ctx.fillRect(this.x, this.y,20,20);
		ctx.fill();
}

pocisk.prototype.update = function()
{
	//setInterval(this.update,300);
	//this.rysuj();
	//this.ruch();
}


pocisk.prototype.ruch = function()
{
	if(this.y>=0)
	this.y -= this.dy;
}*/
	
	document.onkeydown = checkKey;

 function checkKey(e) 
 {
 
	 e = e || window.event;
 

	 if (e.keyCode == '37') //lewo
	{
		ctx.fillStyle = "black";
		ctx.clearRect(0,460,500,40);
		ctx.fillRect(0,460,500,40);
		statek[0].lewo();
		statek[0] = new ship(statek[0].x,statek[0].y,size);		
		statek[1].lewo();
		statek[1] = new ship(statek[1].x,statek[1].y,size);
		statek[2].lewo();
		statek[2] = new ship(statek[2].x,statek[2].y,size);
		statek[3].lewo();
		statek[3] = new ship(statek[3].x,statek[3].y,size);
	 }
	 else if (e.keyCode == '39') //prawo
	{  
	   	ctx.fillStyle = "black";
		ctx.clearRect(0,460,500,40);
		ctx.fillRect(0,460,500,40);
		statek[0].prawo();
		statek[0] = new ship(statek[0].x,statek[0].y,size);		
		statek[1].prawo();
		statek[1] = new ship(statek[1].x,statek[1].y,size);
		statek[2].prawo();
		statek[2] = new ship(statek[2].x,statek[2].y,size);
		statek[3].prawo();
		statek[3] = new ship(statek[3].x,statek[3].y,size);
	 }
 
	 else if (e.keyCode == '32') // spacja
	{

	
	var bullet = new pocisk(statek[3].x,statek[3].y - 20, size,"gray");
	
	p.push(bullet);

	  		 
	  	function petla()
	  { ctx.fillStyle = "black";
	    ctx.fillRect(0,0,460,460);
	    for (i=0; i<p.length ; i++)
	    {
			p[i].rysuj();
			p[i].ruch();
	    }
	    window.requestAnimationFrame(setTimeout(petla,100));
	  }
	  petla(i);
	  		 			 
	   i++;
	}
 

}

	
	setInterval(rysuj,300);
	
	</script>

	</body>
	</html>